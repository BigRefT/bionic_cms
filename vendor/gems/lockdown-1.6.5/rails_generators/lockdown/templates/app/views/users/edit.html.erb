<h1>Editing User</h1>

<%% form_for(<%= namespace.blank? ? "@user" : "[:#{namespace}, @user]" %>) do |f| %>
  <%%= f.error_messages %>
  <p>
    <b>First name</b><br />
    <%%= f.text_field :first_name %>
  </p>
  <p>
    <b>Last name</b><br />
    <%%= f.text_field :last_name %>
  </p>
  <p>
    <b>Email</b><br />
    <%%= f.text_field :email %>
  </p>
  <p>
  	<b>Login</b><br />
    <%%= f.text_field :login %>
  </p>
  <p>
    <b>Password</b><br />
    <%%= f.password_field :password %>
  </p>
  <p>
    <b>Password confirmation</b><br />
    <%%= f.password_field :password_confirmation %>
  </p>
  <p>
    <b>User Groups</b><br />
    <ul style="list-style: none;">
      <%% 
        @user_groups_for_user.each_with_index do |ug,i|
          input_id = "ug_#{ug.id}"
          checked = (@user.user_group_ids.include?(ug.id) ? "checked" : "")          
      %>
          <li id="li_<%%= input_id %>">
            <label for="<%%= input_id %>">
            <input id="<%%= input_id %>" name="<%%= input_id %>" type="checkbox" <%%= checked %>/>&nbsp;&nbsp;<%%= ug.name %>
            </label>
          </li>
      <%% 
        end
      %>
    </ul>
  </p>
  <p> <%%= f.submit "Update" %> </p>
<%% end %>

<%%= link_to 'Show', <%= namespace.blank? ? "user_path(@user)" : "#{namespace}_user_path(@user)" %> %> |
<%%= link_to 'Back', <%= namespace.blank? ? "users_path" : "#{namespace}_users_path" %> %>
